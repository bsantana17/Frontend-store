<h2>New {{data.typeName}} Stage</h2>
<div>
    <p>
        In the <b>Critical Evaluation Stage</b> students must answer some questions on every bookmarked page (on the Search Stage).
    </p>
</div>
<hr>

<div mat-dialog-content>
    <form [formGroup]="criticalForm">
        <div class="form-row">
            <div class="form-group col-8">
                <label for="id">Id name of the stage</label>
                <input type="text" class="form-control" name="id" placeholder="instructions-begin" formControlName="id" [ngClass]="{ 'is-invalid': criticalForm.controls.id.errors, 'is-valid': !criticalForm.controls.id.errors}">
            </div>
            <div class="form-group col-4">
                <label for="time">Time limit (minutes)</label>
                <input type="number" class="form-control" name="time" formControlName="time" [ngClass]="{'is-invalid': criticalForm.controls.time.errors, 'is-valid': !criticalForm.controls.time.errors}">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col">
                <label for="alert">Reminder alert (minutes)</label>
                <input type="number" class="form-control" name="alert" formControlName="alert" [ngClass]="{ 'is-invalid': criticalForm.controls.alert.errors, 'is-valid': !criticalForm.controls.alert.errors}">
            </div>
            <div class="form-group col">
                <label for="stage">URL Parameter</label>
                <input type="text" class="form-control" name="stage" placeholder="instructions-begin" formControlName="stage" [ngClass]="{ 'is-invalid': criticalForm.controls.stage.errors, 'is-valid': !criticalForm.controls.stage.errors}">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col">
                <label for="">Tutorial Image Templates</label>
                <mat-select formControlName="slides" [ngClass]="{ 'is-invalid': criticalForm.controls.slides.errors, 'is-valid': !criticalForm.controls.slides.errors }" class="form-control" multiple>
                    <mat-option *ngFor="let image of images" [value]="image">{{image}}</mat-option>
                </mat-select>
            </div>
            <div class="col-4 ml-2 mt-4">
                <button type="button" class="btn btn-info btn-sm" (click)="newModal()">Upload Images</button>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col">
                <label for="">Questionnaire for Bookmarks</label>
                <select formControlName="form" class="form-control" [ngClass]="{ 'is-invalid': criticalForm.controls.form.errors, 'is-valid': !criticalForm.controls.form.errors }">
                                    <option *ngFor="let qs of questionnaires" [ngValue]="qs._id">{{qs.questionnaireId}}</option>
                                </select>
            </div>
            <div class="form-group col">
                <label for="">Tips Modal Template</label>
                <select formControlName="tips" class="form-control" [ngClass]="{ 'is-invalid': criticalForm.controls.tips.errors, 'is-valid': !criticalForm.controls.tips.errors }">
                                    <option *ngFor="let modal of modals" [ngValue]="modal">{{modal}}</option>
                                </select>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <button type="button" class="btn btn-info btn-sm" (click)="newQuestionnaire()">New Questionnaire</button>
            </div>
            <div class="col">
                <button type="button" class="btn btn-info btn-sm" (click)="newModal()">New Modal</button>
            </div>
        </div>
    </form>
</div>
<hr>
<div mat-dialog-actions align="end">
    <button class="btn btn-danger mr-2" (click)="onNoClick()" cdkFocusInitial>Cancel</button>
    <button class="btn btn-success " (click)="save()" [ngClass]="{'disabled': !criticalForm.valid}">Save</button>
</div>