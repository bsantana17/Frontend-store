<div class="row">
  <div class="col-8">
      <h1>Keep your studies avaible for NEURONE</h1>
  </div>
  <div class="col">
      <button class="btn btn-danger" (click)="backClicked()" style="float: right">Back</button>
  </div>
</div>
<hr>



<h3>Your Study Flows</h3>
<div class="text-center" *ngIf="myStudies.length == 0; else myStudiesList">
    <div class="spinner-border" role="status">
        <span class="sr-only">Loading...</span>
    </div>
</div>
<ng-template #myStudiesList>
    <div class="row">
        <div class="col-4">
            <div class="limit-tab pl-3 pr-3">
                <div class="list-group mt-3">
                    <div class="list-group-item row" *ngFor="let study of myStudies">
                        <div class="col">
            
                            <div class="d-flex w-100 justify-content-between">
                                <h4 class="mb-1">{{study.id}}</h4>
                            </div>
                            <b></b>
                            <p class="mb-1">Language file: <b>{{study.locale}}</b>. With <b>{{study.stages.length}} stages</b>.</p>
                        </div>
                        <div class="col">
                            <button class="btn btn-primary mr-3" (click)="viewStudyDetails(study)">Details</button>
                            <button class="btn btn-success mr-3" (click)="loadStudy(study)">Load</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="jumbotron">
                <h4 *ngIf="activeStudy == null; else showStudy">Select an study</h4>
                <ng-template #showStudy>
                    <div class="row">
                        <h3>
                            {{activeStudy.id}}
                        </h3>
                    </div>
                    <div class="row">
                        <p class="mt-2 mb-2">{{stateStudy}}</p>
                    </div>
                    <div class="row mb-2">
                        <button class="btn btn-primary mr-3" (click)="generatePublish()">Generate</button>
                        <button class="btn btn-danger">Cancel</button>
                    </div>
                    <div class="row">
                        <button class="btn btn-success mt-2 mb-2" *ngIf="loadedItems === totalItems" (click)="publishStudy()">Publish</button>
                    </div>
                </ng-template>
            </div>
            <div class="progress" *ngIf="loadedItems > 0">
                <div class="progress-bar" role="progressbar" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100" [style.width]="(loadedItems/totalItems)*100 + '%'">
                    {{(loadedItems/totalItems)*100}}%
                </div>
            </div>
        </div>
    </div>
</ng-template>